/************************************************** 
Branching Control Signal Generator Unit 
-> depending on the control signals generated by the control signal generator unit, 
   ALU flags, and funct3 section in B-type instructions generate Branch control signal 
**************************************************/ 

module branch(BranchEn, IsUncond, funct3, z, lt, Branch); 
  input[2:0] funct3; 
  input BranchEn, IsUncond, z, lt; 
  output reg Branch; 
  
  always @* begin 
    if (!BranchEn)  // no conditional or unconditional branching 
      Branch = 0; 
    else if (IsUncond) 
      Branch = 1; // unconditional branching 
    else 
      case (funct3) // conditional branching 
        (3'b000): begin if (z)  Branch = 1; else Branch = 0; end // BEQ 
        (3'b001): begin if (!z) Branch = 1; else Branch = 0; end // BNE 
        (3'b100): begin if (lt) Branch = 1; else Branch = 0; end // BLT 
        (3'b101): begin if (!lt)Branch = 1; else Branch = 0; end // BGE 
        (3'b110): begin if (lt) Branch = 1; else Branch = 0; end // BLTU 
        (3'b111): begin if (!lt)Branch = 1; else Branch = 0; end // BGEU 
        default: Branch = 0; 
      endcase 
  end 
endmodule // branch 